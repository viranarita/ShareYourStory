/*! For license information please see app.bundle.js.LICENSE.txt */
(()=>{"use strict";var t={d:(n,e)=>{for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{addNewStory:()=>Jt,deleteStory:()=>$t,fetchAllStories:()=>Vt,loginUser:()=>Ut,registerUser:()=>Ht});const e={parseActiveUrlWithCombiner:function(){var t=location.hash.slice(1).toLowerCase(),n=this._urlSplitter(t);return this._urlCombiner(n)},parseActiveUrlWithoutCombiner:function(){var t=location.hash.slice(1).toLowerCase();return this._urlSplitter(t)},_urlSplitter:function(t){var n=t.split("/");return{resource:n[1]||null,id:n[2]||null,verb:n[3]||null}},_urlCombiner:function(t){return(t.resource?"/".concat(t.resource):"/")+(t.id?"/:id":"")+(t.verb?"/".concat(t.verb):"")}},r=(t,n)=>n.some((n=>t instanceof n));let o,i;const a=new WeakMap,u=new WeakMap,c=new WeakMap;let s={get(t,n,e){if(t instanceof IDBTransaction){if("done"===n)return a.get(t);if("store"===n)return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return p(t[n])},set:(t,n,e)=>(t[n]=e,!0),has:(t,n)=>t instanceof IDBTransaction&&("done"===n||"store"===n)||n in t};function f(t){s=t(s)}function l(t){return"function"==typeof t?(n=t,(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(n)?function(...t){return n.apply(v(this),t),p(this.request)}:function(...t){return p(n.apply(v(this),t))}):(t instanceof IDBTransaction&&function(t){if(a.has(t))return;const n=new Promise(((n,e)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{n(),r()},i=()=>{e(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)}));a.set(t,n)}(t),r(t,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,s):t);var n}function p(t){if(t instanceof IDBRequest)return function(t){const n=new Promise(((n,e)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{n(p(t.result)),r()},i=()=>{e(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",i)}));return c.set(n,t),n}(t);if(u.has(t))return u.get(t);const n=l(t);return n!==t&&(u.set(t,n),c.set(n,t)),n}const v=t=>c.get(t),y=["get","getKey","getAll","getAllKeys","count"],d=["put","add","delete","clear"],h=new Map;function m(t,n){if(!(t instanceof IDBDatabase)||n in t||"string"!=typeof n)return;if(h.get(n))return h.get(n);const e=n.replace(/FromIndex$/,""),r=n!==e,o=d.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!y.includes(e))return;const i=async function(t,...n){const i=this.transaction(t,o?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(n.shift())),(await Promise.all([a[e](...n),o&&i.done]))[0]};return h.set(n,i),i}f((t=>({...t,get:(n,e,r)=>m(n,e)||t.get(n,e,r),has:(n,e)=>!!m(n,e)||t.has(n,e)})));const b=["continue","continuePrimaryKey","advance"],w={},g=new WeakMap,k=new WeakMap,S={get(t,n){if(!b.includes(n))return t[n];let e=w[n];return e||(e=w[n]=function(...t){g.set(this,k.get(this)[n](...t))}),e}};async function*x(...t){let n=this;if(n instanceof IDBCursor||(n=await n.openCursor(...t)),!n)return;const e=new Proxy(n,S);for(k.set(e,n),c.set(e,v(n));n;)yield e,n=await(g.get(e)||n.continue()),g.delete(e)}function O(t,n){return n===Symbol.asyncIterator&&r(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===n&&r(t,[IDBIndex,IDBObjectStore])}function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function _(){var t=I(),n=t.m(_),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,P(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(_=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new C(t,n)},AsyncIterator:G,async:function(t,n,e,o,a){return(r(n)?N:E)(i(t),n,e,o,a)},keys:T,values:P}})()}function P(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(j(t)+" is not iterable")}function T(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function E(t,n,e,r,o){var i=N(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function N(t,n,e,r,o){return new G(I().w(t,n,e,r),o||Promise)}function G(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof C?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(F(G.prototype),F(G.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),F(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function I(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return F(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(F(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,F(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,F(l,"constructor",s),F(s,"constructor",c),c.displayName="GeneratorFunction",F(s,o,"GeneratorFunction"),F(l),F(l,o,"Generator"),F(l,r,(function(){return this})),F(l,"toString",(function(){return"[object Generator]"})),(I=function(){return{w:i,m:p}})()}function F(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}F=function(t,n,e,r){function i(n,e){F(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},F(t,n,e,r)}function C(t,n){this.v=t,this.k=n}function A(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function D(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){A(i,r,o,a,u,"next",t)}function u(t){A(i,r,o,a,u,"throw",t)}a(void 0)}))}}f((t=>({...t,get:(n,e,r)=>O(n,e)?x:t.get(n,e,r),has:(n,e)=>O(n,e)||t.has(n,e)})));var q="favorites",M="outbox",B=function(t,n,{blocked:e,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(t,n),u=p(a);return r&&a.addEventListener("upgradeneeded",(t=>{r(p(a.result),t.oldVersion,t.newVersion,p(a.transaction),t)})),e&&a.addEventListener("blocked",(t=>e(t.oldVersion,t.newVersion,t))),u.then((t=>{i&&t.addEventListener("close",(()=>i())),o&&t.addEventListener("versionchange",(t=>o(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),u}("berbagi-cerita-db",2,{upgrade:function(t,n){n<1&&t.createObjectStore(q,{keyPath:"id"}),n<2&&t.createObjectStore(M,{keyPath:"id",autoIncrement:!0})}});const W=function(t){return D(_().mark((function n(){return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,B;case 2:return n.abrupt("return",n.sent.put(q,t));case 3:case"end":return n.stop()}}),n)})))()},z=function(){return D(_().mark((function t(){return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B;case 2:return t.abrupt("return",t.sent.getAll(q));case 3:case"end":return t.stop()}}),t)})))()},H=function(t){return D(_().mark((function n(){return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,B;case 2:return n.abrupt("return",n.sent.delete(q,t));case 3:case"end":return n.stop()}}),n)})))()},R=function(t){return D(_().mark((function n(){return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,B;case 2:return n.abrupt("return",n.sent.add(M,t));case 3:case"end":return n.stop()}}),n)})))()},U=function(){return D(_().mark((function t(){return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B;case 2:return t.abrupt("return",t.sent.getAll(M));case 3:case"end":return t.stop()}}),t)})))()},Y=function(t){return D(_().mark((function n(){return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,B;case 2:return n.abrupt("return",n.sent.delete(M,t));case 3:case"end":return n.stop()}}),n)})))()};function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function K(){var t=tt(),n=t.m(K),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,J(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(K=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new et(t,n)},AsyncIterator:Z,async:function(t,n,e,o,a){return(r(n)?Q:$)(i(t),n,e,o,a)},keys:X,values:J}})()}function J(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(V(t)+" is not iterable")}function X(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function $(t,n,e,r,o){var i=Q(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Q(t,n,e,r,o){return new Z(tt().w(t,n,e,r),o||Promise)}function Z(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof et?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(nt(Z.prototype),nt(Z.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),nt(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function tt(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return nt(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(nt(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,nt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,nt(l,"constructor",s),nt(s,"constructor",c),c.displayName="GeneratorFunction",nt(s,o,"GeneratorFunction"),nt(l),nt(l,o,"Generator"),nt(l,r,(function(){return this})),nt(l,"toString",(function(){return"[object Generator]"})),(tt=function(){return{w:i,m:p}})()}function nt(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}nt=function(t,n,e,r){function i(n,e){nt(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},nt(t,n,e,r)}function et(t,n){this.v=t,this.k=n}function rt(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function ot(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){rt(i,r,o,a,u,"next",t)}function u(t){rt(i,r,o,a,u,"throw",t)}a(void 0)}))}}function it(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,at(r.key),r)}}function at(t){var n=function(t){if("object"!=V(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=V(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==V(n)?n:n+""}function ut(t,n,e){(function(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,n),n.set(t,e)}function ct(t,n){return t.get(ft(t,n))}function st(t,n,e){return t.set(ft(t,n),e),e}function ft(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var lt=new WeakMap,pt=new WeakMap;const vt=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),ut(this,lt,null),ut(this,pt,{})},n=[{key:"render",value:(e=ot(K().mark((function t(){return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section id="home-page-content"></section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"initializeMap",value:function(){var t=document.querySelector("#map");t&&(t.style.display="block"),st(lt,this,L.map("map").setView([-2.5489,118.0149],5));var n=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),e={Street:n,Satellite:L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri"})};L.control.layers(e).addTo(ct(lt,this)),n.addTo(ct(lt,this))}},{key:"displayGuestMessage",value:function(t){document.querySelector("#home-page-content").innerHTML='\n      <div class="guest-view-prompt-fullwidth text-center">\n          <h2>üëã Selamat Datang!</h2>\n          <p>'.concat(t,'</p>\n          <a href="#/login" class="login-prompt-button">Login Sekarang</a>\n      </div>\n    ')}},{key:"displayStories",value:function(t){var n=this,e=document.querySelector("#home-page-content");e.innerHTML='\n      <div class="container">\n        <h1>Jelajahi Cerita Pengguna</h1>\n        <div id="map"></div>\n        <div id="story-list" class="story-list"></div>\n      </div>\n    ',this.initializeMap();var r=e.querySelector("#story-list");Object.values(ct(pt,this)).forEach((function(t){return ct(lt,n).removeLayer(t)})),st(pt,this,{}),0!==t.length?t.forEach((function(t){var e=n._createStoryElement(t);if(r.appendChild(e),t.lat&&t.lon){var o=L.marker([t.lat,t.lon]).addTo(ct(lt,n)).bindPopup('\n            <img src="'.concat(t.photoUrl,'" alt="Gambar cerita oleh ').concat(t.name,'" class="popup-image">\n            <b>').concat(t.name,"</b>\n            <br>\n            <small>").concat(n._formatDate(t.createdAt),'</small> \n            <hr style="margin: 4px 0;"> \n            ').concat(t.description.substring(0,30),"...\n          "));ct(pt,n)[t.id]=o,e.addEventListener("mouseenter",(function(){return o.openPopup()})),e.addEventListener("mouseleave",(function(){return o.closePopup()}))}})):r.innerHTML='<p class="stories-empty">Tidak ada cerita untuk ditampilkan.</p>'}},{key:"displayError",value:function(t){document.querySelector("#home-page-content").innerHTML='<div class="container"><p class="stories-empty">‚ùå Gagal memuat data: '.concat(t,"</p></div>")}},{key:"_createStoryElement",value:function(t){var n=document.createElement("article");n.classList.add("story-item"),n.id="story-".concat(t.id),n.innerHTML='\n      <img class="story-item__image" src="'.concat(t.photoUrl,'" alt="Gambar cerita oleh ').concat(t.name,'">\n      <div class="story-item__content">\n        <div class="story-item__header">\n          <h3 class="story-item__name">').concat(t.name,'</h3>\n          <p class="story-item__date">').concat(this._formatDate(t.createdAt),'</p> \n        </div>\n        <p class="story-item__description">').concat(t.description,'</p>\n        \n        <button \n          class="favorite-button" \n          aria-label="Tambahkan ke favorit" \n          data-story-id="').concat(t.id,'">\n          ‚ù§Ô∏è\n        </button>\n      </div>\n    ');var e=n.querySelector(".favorite-button");return e.addEventListener("click",function(){var n=ot(K().mark((function n(r){return K().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.stopPropagation(),n.next=3,W(t);case 3:alert("Cerita ditambahkan ke favorit!"),e.disabled=!0,e.innerText="‚úÖ";case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()),n}},{key:"_formatDate",value:function(t){return new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})}}],n&&it(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e}();function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function dt(){var t=kt(),n=t.m(dt),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,ht(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(dt=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new xt(t,n)},AsyncIterator:gt,async:function(t,n,e,o,a){return(r(n)?wt:bt)(i(t),n,e,o,a)},keys:mt,values:ht}})()}function ht(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(yt(t)+" is not iterable")}function mt(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function bt(t,n,e,r,o){var i=wt(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function wt(t,n,e,r,o){return new gt(kt().w(t,n,e,r),o||Promise)}function gt(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof xt?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(St(gt.prototype),St(gt.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),St(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function kt(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return St(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(St(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,St(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,St(l,"constructor",s),St(s,"constructor",c),c.displayName="GeneratorFunction",St(s,o,"GeneratorFunction"),St(l),St(l,o,"Generator"),St(l,r,(function(){return this})),St(l,"toString",(function(){return"[object Generator]"})),(kt=function(){return{w:i,m:p}})()}function St(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}St=function(t,n,e,r){function i(n,e){St(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},St(t,n,e,r)}function xt(t,n){this.v=t,this.k=n}function Ot(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function jt(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Ot(i,r,o,a,u,"next",t)}function u(t){Ot(i,r,o,a,u,"throw",t)}a(void 0)}))}}function _t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pt(r.key),r)}}function Pt(t){var n=function(t){if("object"!=yt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=yt(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yt(n)?n:n+""}var Tt=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"render",value:(r=jt(dt().mark((function t(){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container about-page">\n        <h1>Tentang Proyek Ini</h1>\n        <p>\n          Selamat datang di platform Berbagi Cerita kami! Ini adalah tempat di mana Anda dapat membagikan momen berkesan dan menemukan cerita dari orang lain, yang semuanya ditandai pada lokasinya di peta dunia yang interaktif.\n        </p>\n        \n        <h2>Fitur Utama Kami</h2>\n        <div class="features-grid">\n          <div class="feature-card">\n            <span class="feature-emoji">üó∫Ô∏è</span>\n            <h4><strong>Peta Interaktif</strong></h4>\n            <p>Jelajahi cerita secara visual. Arahkan kursor ke sebuah cerita dalam daftar untuk melihat lokasinya disorot di peta!</p>\n          </div>\n          <div class="feature-card">\n            <span class="feature-emoji">‚ûï</span>\n            <h4><strong>Bagikan Momen Anda</strong></h4>\n            <p>Tambahkan cerita Anda sendiri dengan mudah, lengkap dengan deskripsi, foto, dan cukup dengan mengklik lokasi di peta.</p>\n          </div>\n          <div class="feature-card">\n            <span class="feature-emoji">üìπ</span>\n            <h4><strong>Ambil Gambar Langsung dari Kamera</strong></h4>\n            <p>Belum punya foto? Anda bisa mengabadikan momen secara langsung dari kamera perangkat Anda.</p>\n          </div>\n          <div class="feature-card">\n            <span class="feature-emoji">üì±</span>\n            <h4><strong>Modern & Aksesibel</strong></h4>\n            <p>Nikmati pengalaman yang lancar di perangkat apa pun, berkat desain yang responsif dan teknologi web modern.</p>\n          </div>\n        </div>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=jt(dt().mark((function t(){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}],n&&_t(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();const Et="https://story-api.dicoding.dev/v1";function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function Nt(){var t=Dt(),n=t.m(Nt),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Gt(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Nt=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Mt(t,n)},AsyncIterator:At,async:function(t,n,e,o,a){return(r(n)?Ct:Ft)(i(t),n,e,o,a)},keys:It,values:Gt}})()}function Gt(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Lt(t)+" is not iterable")}function It(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Ft(t,n,e,r,o){var i=Ct(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Ct(t,n,e,r,o){return new At(Dt().w(t,n,e,r),o||Promise)}function At(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Mt?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(qt(At.prototype),qt(At.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),qt(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Dt(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return qt(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(qt(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,qt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,qt(l,"constructor",s),qt(s,"constructor",c),c.displayName="GeneratorFunction",qt(s,o,"GeneratorFunction"),qt(l),qt(l,o,"Generator"),qt(l,r,(function(){return this})),qt(l,"toString",(function(){return"[object Generator]"})),(Dt=function(){return{w:i,m:p}})()}function qt(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}qt=function(t,n,e,r){function i(n,e){qt(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},qt(t,n,e,r)}function Mt(t,n){this.v=t,this.k=n}function Bt(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Wt(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Bt(i,r,o,a,u,"next",t)}function u(t){Bt(i,r,o,a,u,"throw",t)}a(void 0)}))}}var zt=function(){return localStorage.getItem("authToken")};function Ht(t){return Rt.apply(this,arguments)}function Rt(){return(Rt=Wt(Nt().mark((function t(n){var e,r,o,i,a;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.name,r=n.email,o=n.password,t.next=3,fetch("".concat(Et,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:r,password:o})});case 3:return i=t.sent,t.next=6,i.json();case 6:if(!(a=t.sent).error){t.next=9;break}throw new Error(a.message);case 9:return t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ut(t){return Yt.apply(this,arguments)}function Yt(){return(Yt=Wt(Nt().mark((function t(n){var e,r,o,i;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.email,r=n.password,t.next=3,fetch("".concat(Et,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})});case 3:return o=t.sent,t.next=6,o.json();case 6:if(!(i=t.sent).error){t.next=9;break}throw new Error(i.message);case 9:return t.abrupt("return",i.loginResult);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Vt(){return Kt.apply(this,arguments)}function Kt(){return(Kt=Wt(Nt().mark((function t(){var n,e;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(Et,"/stories"),{headers:{Authorization:"Bearer ".concat(zt())}});case 2:return n=t.sent,t.next=5,n.json();case 5:if(!(e=t.sent).error){t.next=8;break}throw new Error(e.message);case 8:return t.abrupt("return",e.listStory);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Jt(t){return Xt.apply(this,arguments)}function Xt(){return(Xt=Wt(Nt().mark((function t(n){var e,r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(Et,"/stories"),{method:"POST",headers:{Authorization:"Bearer ".concat(zt())},body:n});case 2:return e=t.sent,t.next=5,e.json();case 5:if(!(r=t.sent).error){t.next=8;break}throw new Error(r.message);case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $t(t){return Qt.apply(this,arguments)}function Qt(){return(Qt=Wt(Nt().mark((function t(n){var e,r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(Et,"/stories/").concat(n),{method:"DELETE",headers:{Authorization:"Bearer ".concat(authToken)}});case 3:if((e=t.sent).ok){t.next=6;break}throw new Error("HTTP error! status: ".concat(e.status));case 6:return t.next=8,e.json();case 8:if(!(r=t.sent).error){t.next=11;break}throw new Error(r.message);case 11:return t.abrupt("return",r);case 14:return t.prev=14,t.t0=t.catch(0),console.error("Gagal menghapus cerita:",t.t0),t.abrupt("return",{error:!0,message:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}function Zt(t){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(t)}function tn(){var t=un(),n=t.m(tn),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,nn(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(tn=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new sn(t,n)},AsyncIterator:an,async:function(t,n,e,o,a){return(r(n)?on:rn)(i(t),n,e,o,a)},keys:en,values:nn}})()}function nn(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Zt(t)+" is not iterable")}function en(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function rn(t,n,e,r,o){var i=on(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function on(t,n,e,r,o){return new an(un().w(t,n,e,r),o||Promise)}function an(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof sn?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(cn(an.prototype),cn(an.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),cn(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function un(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return cn(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(cn(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,cn(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,cn(l,"constructor",s),cn(s,"constructor",c),c.displayName="GeneratorFunction",cn(s,o,"GeneratorFunction"),cn(l),cn(l,o,"Generator"),cn(l,r,(function(){return this})),cn(l,"toString",(function(){return"[object Generator]"})),(un=function(){return{w:i,m:p}})()}function cn(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}cn=function(t,n,e,r){function i(n,e){cn(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},cn(t,n,e,r)}function sn(t,n){this.v=t,this.k=n}function fn(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function ln(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){fn(i,r,o,a,u,"next",t)}function u(t){fn(i,r,o,a,u,"throw",t)}a(void 0)}))}}function pn(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vn(r.key),r)}}function vn(t){var n=function(t){if("object"!=Zt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Zt(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Zt(n)?n:n+""}function yn(t,n){return t.get(hn(t,n))}function dn(t,n,e){return t.set(hn(t,n),e),e}function hn(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var mn=new WeakMap,bn=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,n,e){(function(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,n),n.set(t,e)}(this,mn,null)},n=[{key:"render",value:(o=ln(tn().mark((function t(){return tn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container">\n        <h1>Tambah Cerita Baru</h1>\n        <form id="add-story-form" class="add-story-form" novalidate>\n          \n          <div class="form-group">\n            <label for="story-description">Deskripsi:</label>\n            <textarea id="story-description" name="description" rows="4" required></textarea>\n          </div>\n          \n          <div class="form-group">\n            <label for="story-photo">Gambar:</label>\n            <input type="file" id="story-photo" name="photo" accept="image/*" required>\n            <button type="button" id="camera-button" class="camera-button">Ambil dari Kamera</button>\n          </div>\n\n          <div id="camera-container" class="camera-container" style="display: none;">\n            <video id="camera-preview" autoplay></video>\n            <button type="button" id="capture-button" class="capture-button" aria-label="Ambil Foto"></button>\n            <button type="button" id="close-camera-button" class="close-camera-button" aria-label="Tutup Kamera">X</button>\n          </div>\n          <canvas id="photo-canvas" style="display: none;"></canvas>\n\n          <div class="form-group">\n            <label for="map-add">Pilih Lokasi di Peta:</label>\n            <div id="map-add"></div>\n            <input type="hidden" id="latitude" name="lat">\n            <input type="hidden" id="longitude" name="lon">\n          </div>\n          <button type="submit" id="submit-button" class="submit-button">Bagikan Cerita</button>\n        </form>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(r=ln(tn().mark((function t(){return tn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._initializeMap(),this._initializeFormSubmit(),this._initializeCamera();case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"_initializeMap",value:function(){var t=L.map("map-add").setView([-2.5489,118.0149],5);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(t);var n,e=document.querySelector("#latitude"),r=document.querySelector("#longitude");t.on("click",(function(o){var i=o.latlng,a=i.lat,u=i.lng;e.value=a,r.value=u,n&&t.removeLayer(n),n=L.marker([a,u]).addTo(t)}))}},{key:"_initializeFormSubmit",value:function(){var t=this,n=document.querySelector("#add-story-form"),e=document.querySelector("#submit-button");n.addEventListener("submit",function(){var r=ln(tn().mark((function r(o){var i,a,u,c,s,f,l;return tn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o.preventDefault(),i=document.querySelector("#story-description").value,a=document.querySelector("#story-photo").files[0],u=document.querySelector("#latitude").value,c=document.querySelector("#longitude").value,i&&a){r.next=8;break}return t._showFeedback("Deskripsi dan gambar harus diisi.","error"),r.abrupt("return");case 8:return e.disabled=!0,e.innerText="Mengirim...",(s=new FormData).append("description",i),s.append("photo",a),u&&c&&(s.append("lat",u),s.append("lon",c)),r.prev=14,t._showFeedback("Mencoba mengirim cerita...","info"),r.next=18,Jt(s);case 18:if(!(f=r.sent).error){r.next=21;break}throw new Error(f.message);case 21:t._showFeedback("Cerita berhasil ditambahkan! (Online)","success"),setTimeout((function(){window.location.hash="#/"}),2e3),r.next=34;break;case 25:return r.prev=25,r.t0=r.catch(14),console.error("Gagal mengirim ke API, menyimpan ke Outbox:",r.t0.message),t._showFeedback("Gagal mengirim. Cerita disimpan di Outbox.","info"),l={description:i,photo:a,lat:u,lon:c},r.next=32,R(l);case 32:t._showFeedback("Cerita akan dikirim otomatis saat kembali online.","success"),n.reset();case 34:e.disabled=!1,e.innerText="Bagikan Cerita";case 36:case"end":return r.stop()}}),r,null,[[14,25]])})));return function(t){return r.apply(this,arguments)}}())}},{key:"_initializeCamera",value:function(){var t=this,n=document.querySelector("#camera-button"),e=document.querySelector("#capture-button"),r=document.querySelector("#close-camera-button");n.addEventListener("click",(function(){return t._openCamera()})),e.addEventListener("click",(function(){return t._capturePhoto()})),r.addEventListener("click",(function(){return t._closeCamera()}))}},{key:"_openCamera",value:(e=ln(tn().mark((function t(){var n,e;return tn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.querySelector("#camera-container"),e=document.querySelector("#camera-preview"),n.style.display="block",t.prev=3,t.t0=dn,t.t1=mn,t.t2=this,t.next=9,navigator.mediaDevices.getUserMedia({video:!0});case 9:t.t3=t.sent,(0,t.t0)(t.t1,t.t2,t.t3),e.srcObject=yn(mn,this),t.next=19;break;case 14:t.prev=14,t.t4=t.catch(3),console.error("Error mengakses kamera:",t.t4),this._showFeedback("Tidak bisa mengakses kamera. Pastikan Anda memberikan izin.","error"),n.style.display="none";case 19:case"end":return t.stop()}}),t,this,[[3,14]])}))),function(){return e.apply(this,arguments)})},{key:"_capturePhoto",value:function(){var t=this,n=document.querySelector("#photo-canvas"),e=document.querySelector("#camera-preview"),r=document.querySelector("#story-photo");n.width=e.videoWidth,n.height=e.videoHeight,n.getContext("2d").drawImage(e,0,0,n.width,n.height),n.toBlob((function(n){var e=new File([n],"camera-photo.jpg",{type:"image/jpeg"}),o=new DataTransfer;o.items.add(e),r.files=o.files,t._showFeedback("Foto berhasil diambil dari kamera!","success"),t._closeCamera()}),"image/jpeg")}},{key:"_closeCamera",value:function(){document.querySelector("#camera-container").style.display="none",yn(mn,this)&&(yn(mn,this).getTracks().forEach((function(t){return t.stop()})),dn(mn,this,null))}},{key:"_showFeedback",value:function(t,n){var e=document.createElement("div");e.className="toast-notification toast--".concat(n),e.innerText=t,document.body.appendChild(e),setTimeout((function(){e.classList.add("toast--show")}),10),setTimeout((function(){e.classList.remove("toast--show"),e.addEventListener("transitionend",(function(){e.remove()}))}),3e3)}}],n&&pn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r,o}();function wn(t){return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wn(t)}function gn(){var t=_n(),n=t.m(gn),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,kn(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(gn=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Tn(t,n)},AsyncIterator:jn,async:function(t,n,e,o,a){return(r(n)?On:xn)(i(t),n,e,o,a)},keys:Sn,values:kn}})()}function kn(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(wn(t)+" is not iterable")}function Sn(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function xn(t,n,e,r,o){var i=On(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function On(t,n,e,r,o){return new jn(_n().w(t,n,e,r),o||Promise)}function jn(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Tn?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Pn(jn.prototype),Pn(jn.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Pn(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function _n(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Pn(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Pn(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Pn(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Pn(l,"constructor",s),Pn(s,"constructor",c),c.displayName="GeneratorFunction",Pn(s,o,"GeneratorFunction"),Pn(l),Pn(l,o,"Generator"),Pn(l,r,(function(){return this})),Pn(l,"toString",(function(){return"[object Generator]"})),(_n=function(){return{w:i,m:p}})()}function Pn(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Pn=function(t,n,e,r){function i(n,e){Pn(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},Pn(t,n,e,r)}function Tn(t,n){this.v=t,this.k=n}function En(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Ln(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){En(i,r,o,a,u,"next",t)}function u(t){En(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Nn(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gn(r.key),r)}}function Gn(t){var n=function(t){if("object"!=wn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=wn(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wn(n)?n:n+""}var In=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"render",value:(r=Ln(gn().mark((function t(){return gn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container form-page-container">\n        <h2>Login</h2>\n        <form id="login-form" class="login-form" novalidate>\n          <div class="form-group">\n            <label for="email">Email</label>\n            <input type="email" id="email" required>\n          </div>\n          <div class="form-group">\n            <label for="password">Password</label>\n            <input type="password" id="password" required>\n          </div>\n          <button type="submit" class="submit-button">Login</button>\n          <p class="auth-switch">Belum punya akun? <a href="#/register">Register di sini</a></p>\n        </form>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=Ln(gn().mark((function t(){var n=this;return gn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.querySelector("#login-form").addEventListener("submit",function(){var t=Ln(gn().mark((function t(e){var r,o,i;return gn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),r=document.querySelector("#email").value,o=document.querySelector("#password").value,t.prev=3,t.next=6,Ut({email:r,password:o});case 6:i=t.sent,localStorage.setItem("authToken",i.token),localStorage.setItem("userName",i.name),window.location.hash="#/",window.location.reload(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),n._showFeedback(t.t0.message,"error");case 16:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(n){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"_showFeedback",value:function(t,n){var e=document.createElement("div");e.className="toast-notification toast--".concat(n),e.innerText=t,document.body.appendChild(e),setTimeout((function(){e.classList.add("toast--show")}),10),setTimeout((function(){e.classList.remove("toast--show"),e.addEventListener("transitionend",(function(){e.remove()}))}),3e3)}}],n&&Nn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function Fn(t){return Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fn(t)}function Cn(){var t=Wn(),n=t.m(Cn),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,An(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Cn=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Hn(t,n)},AsyncIterator:Bn,async:function(t,n,e,o,a){return(r(n)?Mn:qn)(i(t),n,e,o,a)},keys:Dn,values:An}})()}function An(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Fn(t)+" is not iterable")}function Dn(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function qn(t,n,e,r,o){var i=Mn(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Mn(t,n,e,r,o){return new Bn(Wn().w(t,n,e,r),o||Promise)}function Bn(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Hn?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(zn(Bn.prototype),zn(Bn.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),zn(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Wn(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return zn(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(zn(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,zn(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,zn(l,"constructor",s),zn(s,"constructor",c),c.displayName="GeneratorFunction",zn(s,o,"GeneratorFunction"),zn(l),zn(l,o,"Generator"),zn(l,r,(function(){return this})),zn(l,"toString",(function(){return"[object Generator]"})),(Wn=function(){return{w:i,m:p}})()}function zn(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}zn=function(t,n,e,r){function i(n,e){zn(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},zn(t,n,e,r)}function Hn(t,n){this.v=t,this.k=n}function Rn(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Un(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Rn(i,r,o,a,u,"next",t)}function u(t){Rn(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Yn(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vn(r.key),r)}}function Vn(t){var n=function(t){if("object"!=Fn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Fn(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Fn(n)?n:n+""}var Kn=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"render",value:(r=Un(Cn().mark((function t(){return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container form-page-container">\n        <h2>Register</h2>\n        <form id="register-form" class="register-form" novalidate>\n          \n          <div class="form-group">\n            <label for="name">Nama</label>\n            <input type="text" id="name" required>\n          </div>\n          <div class="form-group">\n            <label for="email">Email</label>\n            <input type="email" id="email" required>\n          </div>\n          <div class="form-group">\n            <label for="password">Password</label>\n            <input type="password" id="password" minlength="8" required>\n          </div>\n          <button type="submit" class="submit-button">Register</button>\n          <p class="auth-switch">Sudah punya akun? <a href="#/login">Login di sini</a></p>\n        </form>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=Un(Cn().mark((function t(){var n=this;return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.querySelector("#register-form").addEventListener("submit",function(){var t=Un(Cn().mark((function t(e){var r,o,i;return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),r=document.querySelector("#name").value,o=document.querySelector("#email").value,!((i=document.querySelector("#password").value).length<8)){t.next=7;break}return n._showFeedback("Password minimal harus 8 karakter.","error"),t.abrupt("return");case 7:return t.prev=7,t.next=10,Ht({name:r,email:o,password:i});case 10:n._showFeedback("Registrasi berhasil! Mengarahkan ke halaman login...","success"),setTimeout((function(){window.location.hash="#/login"}),2e3),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(7),n._showFeedback(t.t0.message,"error");case 17:case"end":return t.stop()}}),t,null,[[7,14]])})));return function(n){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"_showFeedback",value:function(t,n){var e=document.createElement("div");e.className="toast-notification toast--".concat(n),e.innerText=t,document.body.appendChild(e),setTimeout((function(){e.classList.add("toast--show")}),10),setTimeout((function(){e.classList.remove("toast--show"),e.addEventListener("transitionend",(function(){e.remove()}))}),3e3)}}],n&&Yn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}(),Jn="authToken",Xn="userName";const $n=function(){return!!localStorage.getItem(Jn)},Qn=function(){return localStorage.getItem(Xn)},Zn=function(){localStorage.removeItem(Jn),localStorage.removeItem(Xn)};function te(t){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(t)}function ne(){var t=ue(),n=t.m(ne),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,ee(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(ne=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new se(t,n)},AsyncIterator:ae,async:function(t,n,e,o,a){return(r(n)?ie:oe)(i(t),n,e,o,a)},keys:re,values:ee}})()}function ee(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(te(t)+" is not iterable")}function re(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function oe(t,n,e,r,o){var i=ie(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function ie(t,n,e,r,o){return new ae(ue().w(t,n,e,r),o||Promise)}function ae(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof se?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(ce(ae.prototype),ce(ae.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),ce(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function ue(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return ce(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(ce(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,ce(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,ce(l,"constructor",s),ce(s,"constructor",c),c.displayName="GeneratorFunction",ce(s,o,"GeneratorFunction"),ce(l),ce(l,o,"Generator"),ce(l,r,(function(){return this})),ce(l,"toString",(function(){return"[object Generator]"})),(ue=function(){return{w:i,m:p}})()}function ce(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ce=function(t,n,e,r){function i(n,e){ce(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},ce(t,n,e,r)}function se(t,n){this.v=t,this.k=n}function fe(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function le(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){fe(i,r,o,a,u,"next",t)}function u(t){fe(i,r,o,a,u,"throw",t)}a(void 0)}))}}function pe(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ve(r.key),r)}}function ve(t){var n=function(t){if("object"!=te(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=te(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==te(n)?n:n+""}function ye(t,n){return t.get(he(t,n))}function de(t,n,e){return t.set(he(t,n),e),e}function he(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var me=new WeakMap;const be={"/":vt,"/home":vt,"/about":Tt,"/add":bn,"/login":In,"/register":Kn,"/favorite":function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,n,e){(function(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,n),n.set(t,e)}(this,me,[])},n=[{key:"render",value:(r=le(ne().mark((function t(){return ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container">\n        <h1>Cerita Favorit Anda</h1>\n        \n        <div class="search-container form-group">\n          <label for="search-favorite">Cari Cerita Favorit</label>\n          <input id="search-favorite" type="search" placeholder="Ketik nama atau deskripsi...">\n        </div>\n        \n        <div id="story-list" class="story-list"></div>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=le(ne().mark((function t(){var n=this;return ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if($n()){t.next=4;break}return document.querySelector("#story-list").innerHTML='\n        <div class="guest-view-prompt-fullwidth text-center">\n            <h2>Login Dibutuhkan</h2>\n            <p>Silakan login untuk melihat daftar favorit Anda.</p>\n            <a href="#/login" class="login-prompt-button">Login Sekarang</a>\n        </div>\n      ',t.abrupt("return");case 4:return t.t0=de,t.t1=me,t.t2=this,t.next=9,z();case 9:t.t3=t.sent,(0,t.t0)(t.t1,t.t2,t.t3),this._displayStories(ye(me,this)),document.querySelector("#search-favorite").addEventListener("input",(function(t){var e=t.target.value.toLowerCase();n._performSearch(e)}));case 14:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_performSearch",value:function(t){var n=ye(me,this);t&&(n=ye(me,this).filter((function(n){return n.name.toLowerCase().includes(t)||n.description.toLowerCase().includes(t)}))),this._displayStories(n)}},{key:"_displayStories",value:function(t){var n=this,e=document.querySelector("#story-list");e.innerHTML="",0!==t.length?t.forEach((function(t){var r=n._createStoryElement(t);e.appendChild(r)})):e.innerHTML='<p class="stories-empty">Anda belum memiliki cerita favorit atau tidak ada hasil pencarian.</p>'}},{key:"_createStoryElement",value:function(t){var n=this,e=document.createElement("article");return e.classList.add("story-item"),e.id="story-".concat(t.id),e.innerHTML='\n      <img class="story-item__image" src="'.concat(t.photoUrl,'" alt="Gambar cerita oleh ').concat(t.name,'">\n      <div class="story-item__content">\n        <div class="story-item__header">\n          <h3 class="story-item__name">').concat(t.name,'</h3>\n          <p class="story-item__date">').concat(this._formatDate(t.createdAt),'</p> \n        </div>\n        <p class="story-item__description">').concat(t.description,'</p>\n        \n        <button \n          class="delete-button" \n          aria-label="Hapus dari favorit" \n          data-story-id="').concat(t.id,'">\n          Hapus\n        </button>\n      </div>\n    '),e.querySelector(".delete-button").addEventListener("click",function(){var e=le(ne().mark((function e(r){var o;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.stopPropagation(),e.next=3,H(t.id);case 3:de(me,n,ye(me,n).filter((function(n){return n.id!==t.id}))),o=document.querySelector("#search-favorite").value.toLowerCase(),n._performSearch(o),alert("Cerita dihapus dari favorit!");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e}},{key:"_formatDate",value:function(t){return new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})}}],n&&pe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}()};function we(t){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},we(t)}function ge(){var t=_e(),n=t.m(ge),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,ke(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(ge=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Te(t,n)},AsyncIterator:je,async:function(t,n,e,o,a){return(r(n)?Oe:xe)(i(t),n,e,o,a)},keys:Se,values:ke}})()}function ke(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(we(t)+" is not iterable")}function Se(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function xe(t,n,e,r,o){var i=Oe(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Oe(t,n,e,r,o){return new je(_e().w(t,n,e,r),o||Promise)}function je(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Te?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Pe(je.prototype),Pe(je.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Pe(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function _e(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Pe(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Pe(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Pe(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Pe(l,"constructor",s),Pe(s,"constructor",c),c.displayName="GeneratorFunction",Pe(s,o,"GeneratorFunction"),Pe(l),Pe(l,o,"Generator"),Pe(l,r,(function(){return this})),Pe(l,"toString",(function(){return"[object Generator]"})),(_e=function(){return{w:i,m:p}})()}function Pe(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Pe=function(t,n,e,r){function i(n,e){Pe(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},Pe(t,n,e,r)}function Te(t,n){this.v=t,this.k=n}function Ee(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Le(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ge(r.key),r)}}function Ne(t,n,e){return n&&Le(t.prototype,n),e&&Le(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ge(t){var n=function(t){if("object"!=we(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=we(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==we(n)?n:n+""}function Ie(t,n,e){Fe(t,n),n.set(t,e)}function Fe(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ce(t,n){return t.get(De(t,n))}function Ae(t,n,e){return t.set(De(t,n),e),e}function De(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var qe=new WeakMap,Me=new WeakMap,Be=new WeakSet;function We(){$n()?De(Be,this,ze).call(this):Ce(qe,this).displayGuestMessage("Silakan <strong>Login</strong> untuk melihat daftar cerita dari pengguna lain.")}function ze(){return He.apply(this,arguments)}function He(){var t;return t=ge().mark((function t(){var n;return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ce(Me,this).fetchAllStories();case 3:n=t.sent,Ce(qe,this).displayStories(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Ce(qe,this).displayError(t.t0.message);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})),He=function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Ee(i,r,o,a,u,"next",t)}function u(t){Ee(i,r,o,a,u,"throw",t)}a(void 0)}))},He.apply(this,arguments)}const Re=Ne((function t(n){var e,r=n.view,o=n.api;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),Fe(this,e=Be),e.add(this),Ie(this,qe,null),Ie(this,Me,null),Ae(qe,this,r),Ae(Me,this,o),De(Be,this,We).call(this)}));function Ue(t){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ue(t)}function Ye(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return Ve(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Ve(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw i}}}}function Ve(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function Ke(){var t=tr(),n=t.m(Ke),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Je(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Ke=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new er(t,n)},AsyncIterator:Ze,async:function(t,n,e,o,a){return(r(n)?Qe:$e)(i(t),n,e,o,a)},keys:Xe,values:Je}})()}function Je(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Ue(t)+" is not iterable")}function Xe(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function $e(t,n,e,r,o){var i=Qe(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Qe(t,n,e,r,o){return new Ze(tr().w(t,n,e,r),o||Promise)}function Ze(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof er?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(nr(Ze.prototype),nr(Ze.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),nr(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function tr(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return nr(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(nr(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,nr(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,nr(l,"constructor",s),nr(s,"constructor",c),c.displayName="GeneratorFunction",nr(s,o,"GeneratorFunction"),nr(l),nr(l,o,"Generator"),nr(l,r,(function(){return this})),nr(l,"toString",(function(){return"[object Generator]"})),(tr=function(){return{w:i,m:p}})()}function nr(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}nr=function(t,n,e,r){function i(n,e){nr(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},nr(t,n,e,r)}function er(t,n){this.v=t,this.k=n}function rr(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function or(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){rr(i,r,o,a,u,"next",t)}function u(t){rr(i,r,o,a,u,"throw",t)}a(void 0)}))}}function ir(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ar(r.key),r)}}function ar(t){var n=function(t){if("object"!=Ue(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Ue(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ue(n)?n:n+""}function ur(t,n,e){(function(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,n),n.set(t,e)}function cr(t,n){return t.get(fr(t,n))}function sr(t,n,e){return t.set(fr(t,n),e),e}function fr(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var lr=new WeakMap,pr=new WeakMap,vr=new WeakMap,yr=function(){return t=function t(n){var e=n.navigationDrawer,r=n.drawerButton,o=n.content;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),ur(this,lr,null),ur(this,pr,null),ur(this,vr,null),sr(lr,this,o),sr(pr,this,r),sr(vr,this,e),this._initialAppShell()},r=[{key:"_initialAppShell",value:function(){this._setupDrawer(),this._setupSkipLink()}},{key:"_setupDrawer",value:function(){var t=this;cr(pr,this).addEventListener("click",(function(){cr(vr,t).classList.toggle("open")})),document.body.addEventListener("click",(function(n){cr(vr,t).contains(n.target)||cr(pr,t).contains(n.target)||cr(vr,t).classList.remove("open"),cr(vr,t).querySelectorAll("a").forEach((function(e){e.contains(n.target)&&cr(vr,t).classList.remove("open")}))}))}},{key:"_setupSkipLink",value:function(){var t=document.querySelector(".skip-to-content"),n=document.querySelector("#main-content");t&&n&&t.addEventListener("click",(function(t){t.preventDefault(),n.setAttribute("tabindex",-1),n.focus(),n.removeAttribute("tabindex")}))}},{key:"renderPage",value:(i=or(Ke().mark((function t(){var n=this;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(document.startViewTransition){t.next=4;break}return t.next=3,this._updateContent();case 3:return t.abrupt("return");case 4:document.startViewTransition(or(Ke().mark((function t(){return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateContent();case 2:case"end":return t.stop()}}),t)}))));case 5:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"_updateContent",value:(o=or(Ke().mark((function t(){var r,o,i,a;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._updateNavigation(),r=e.parseActiveUrlWithCombiner(),(o=be[r]||be["/"])!==vt){t.next=11;break}return i=new vt,t.next=7,i.render();case 7:cr(lr,this).innerHTML=t.sent,new Re({view:i,api:n}),t.next=18;break;case 11:return a=new o,t.next=14,a.render();case 14:if(cr(lr,this).innerHTML=t.sent,!a.afterRender){t.next=18;break}return t.next=18,a.afterRender();case 18:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"_updateNavigation",value:function(){var t=document.querySelector("#nav-list");if(t)if($n()){var n=Qn();t.innerHTML='\n        <li><a href="#/">Beranda</a></li>\n        <li><a href="#/add">Tambah Cerita</a></li>\n        <li><a href="#/favorite">Favorit</a></li>\n        <li><a href="#/about">About</a></li>\n        <li><a id="logout-button" href="#">Logout ('.concat(n,")</a></li>\n      ");var e=document.querySelector("#logout-button");e&&e.addEventListener("click",(function(t){t.preventDefault(),Zn(),alert("Anda berhasil logout."),window.location.hash="#/login",window.location.reload()}))}else t.innerHTML='\n        <li><a href="#/">Beranda</a></li>\n        <li><a href="#/about">About</a></li>\n        <li><a href="#/login">Login</a></li>\n      '}}],r&&ir(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,o,i}();function dr(t){for(var n=(t+"=".repeat((4-t.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),e=window.atob(n),r=new Uint8Array(e.length),o=0;o<e.length;++o)r[o]=e.charCodeAt(o);return r}function hr(){return mr.apply(this,arguments)}function mr(){return(mr=or(Ke().mark((function t(){var n,e,r;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=document.getElementById("notification-toggle-button")){t.next=3;break}return t.abrupt("return");case 3:if($n()){t.next=6;break}return n.style.display="none",t.abrupt("return");case 6:return t.next=8,navigator.serviceWorker.ready;case 8:return e=t.sent,t.next=11,e.pushManager.getSubscription();case 11:(r=t.sent)?(n.textContent="Disable Notifications",n.classList.add("state-disable"),n.classList.remove("state-enable")):(n.textContent="Enable Notifications",n.classList.add("state-enable"),n.classList.remove("state-disable")),n.style.display="block",n.addEventListener("click",or(Ke().mark((function t(){var o;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.classList.contains("state-enable")){t.next=23;break}return t.next=3,Notification.requestPermission();case 3:if("granted"===t.sent){t.next=8;break}return console.warn("Notification permission denied."),alert("Anda harus mengizinkan notifikasi untuk mengaktifkannya."),t.abrupt("return");case 8:return t.prev=8,t.next=11,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:dr("BC7BY5Cs7SDe_4LGAAWeYyQA1Piu84JKAkYzAV2bG7egw_a6uMWHWqXxGkDxzovLJNXlaegzWoH6ohtnfTFvRsI")});case 11:o=t.sent,console.log("Subscribed!",o),n.textContent="Disable Notifications",n.classList.add("state-disable"),n.classList.remove("state-enable"),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(8),console.error("Failed to subscribe:",t.t0);case 21:t.next=35;break;case 23:return t.prev=23,t.next=26,r.unsubscribe();case 26:console.log("Unsubscribed!"),n.textContent="Enable Notifications",n.classList.add("state-enable"),n.classList.remove("state-disable"),t.next=35;break;case 32:t.prev=32,t.t1=t.catch(23),console.error("Failed to unsubscribe:",t.t1);case 35:case"end":return t.stop()}}),t,null,[[8,18],[23,32]])}))));case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function br(){return(br=or(Ke().mark((function t(){var n;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("serviceWorker"in navigator){t.next=3;break}return console.error("Service Worker API not supported."),t.abrupt("return");case 3:return t.prev=3,t.next=6,navigator.serviceWorker.register("./service-worker.js");case 6:n=t.sent,console.log("Service worker registration succeeded:",n),hr(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.error("Service worker registration failed:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})))).apply(this,arguments)}function wr(){return gr.apply(this,arguments)}function gr(){return(gr=or(Ke().mark((function t(){var n,e,r,o,i,a;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Online! Mencoba mengirim data dari Outbox..."),t.next=3,U();case 3:if(0!==(n=t.sent).length){t.next=7;break}return console.log("Outbox kosong."),t.abrupt("return");case 7:e=Ye(n),t.prev=8,e.s();case 10:if((r=e.n()).done){t.next=33;break}return o=r.value,console.log("Mengirim cerita:",o.description),(i=new FormData).append("description",o.description),i.append("photo",o.photo),o.lat&&o.lon&&(i.append("lat",o.lat),i.append("lon",o.lon)),t.prev=17,t.next=20,Jt(i);case 20:if(!(a=t.sent).error){t.next=23;break}throw new Error(a.message);case 23:return t.next=25,Y(o.id);case 25:console.log("Cerita (ID:",o.id,") berhasil dikirim dan dihapus dari outbox."),t.next=31;break;case 28:t.prev=28,t.t0=t.catch(17),console.error("Gagal mengirim cerita (ID:",o.id,"). Tetap di outbox.",t.t0.message);case 31:t.next=10;break;case 33:t.next=38;break;case 35:t.prev=35,t.t1=t.catch(8),e.e(t.t1);case 38:return t.prev=38,e.f(),t.finish(38);case 41:case"end":return t.stop()}}),t,null,[[8,35,38,41],[17,28]])})))).apply(this,arguments)}!function(){br.apply(this,arguments)}(),window.addEventListener("online",(function(){wr()})),navigator.onLine&&wr();const kr=yr;function Sr(t){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sr(t)}function xr(){var t=Er(),n=t.m(xr),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Or(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(xr=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Nr(t,n)},AsyncIterator:Tr,async:function(t,n,e,o,a){return(r(n)?Pr:_r)(i(t),n,e,o,a)},keys:jr,values:Or}})()}function Or(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Sr(t)+" is not iterable")}function jr(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function _r(t,n,e,r,o){var i=Pr(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Pr(t,n,e,r,o){return new Tr(Er().w(t,n,e,r),o||Promise)}function Tr(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Nr?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Lr(Tr.prototype),Lr(Tr.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Lr(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Er(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Lr(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Lr(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Lr(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Lr(l,"constructor",s),Lr(s,"constructor",c),c.displayName="GeneratorFunction",Lr(s,o,"GeneratorFunction"),Lr(l),Lr(l,o,"Generator"),Lr(l,r,(function(){return this})),Lr(l,"toString",(function(){return"[object Generator]"})),(Er=function(){return{w:i,m:p}})()}function Lr(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Lr=function(t,n,e,r){function i(n,e){Lr(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},Lr(t,n,e,r)}function Nr(t,n){this.v=t,this.k=n}function Gr(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Ir(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Gr(i,r,o,a,u,"next",t)}function u(t){Gr(i,r,o,a,u,"throw",t)}a(void 0)}))}}document.addEventListener("DOMContentLoaded",Ir(xr().mark((function t(){var n;return xr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new kr({content:document.querySelector("#main-content"),drawerButton:document.querySelector("#drawer-button"),navigationDrawer:document.querySelector("#navigation-drawer")}),t.next=3,n.renderPage();case 3:window.addEventListener("hashchange",Ir(xr().mark((function t(){return xr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.renderPage();case 2:case"end":return t.stop()}}),t)}))));case 4:case"end":return t.stop()}}),t)})))),"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/service-worker.js").then((function(t){console.log("[SW] registered:",t),t.waiting&&console.log("[SW] waiting to activate..."),t.addEventListener("updatefound",(function(){console.log("[SW] Update found!");var n=t.installing;n.addEventListener("statechange",(function(){"installed"===n.state&&navigator.serviceWorker.controller&&console.log("[SW] New version ready, waiting to activate.")}))}))})).catch((function(t){return console.error("[SW] registration failed:",t)}))}))})();